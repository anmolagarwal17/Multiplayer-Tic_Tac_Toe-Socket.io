<!DOCTYPE html>
<html lang="en">

<head>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sansita+Swashed&display=swap');

        body {
            height: 100vh;
            font-family: 'Sansita Swashed', cursive !important;
        }

        .h-85 {
            height: 85% !important;
        }
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- bootstrap css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <title>Share Unlimited</title>
</head>

<body>

    <!-- nav bar -->
    <nav class="navbar sticky-top navbar-dark bg-dark" id="b">
        <a class="navbar-brand" href="#">
            Share Unlimited
        </a>
    </nav>

    <div class="container-md h-85 p-5" id="a">
        <div class="row">
            <div>
                <form action="#" method="get" id="form">
                    <input type="file" name="file" id="file">
                    <input type="submit" value="submit" id="submit" />
                </form>
            </div>
            <div class="card">
                <div class="card-body" id="room">
                    This is some text within a card body.
                </div>
            </div>
            <!-- <div class="card w-100">
                <div class="card-body py-2 px-3">
                    <h5 class="card-title mb-1">Card title</h5>
                    <div class="d-flex justify-content-between">
                        <span>f</span>
                        <span>f</span>
                        <span>f</span>
                    </div>
                    <div class="progress mt-2">
                        <div class="progress-bar" role="progressbar" style="width: 25%" aria-valuenow="25"
                            aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                </div>
            </div> -->
        </div>
    </div>







    <script>
        document.querySelector('#b').addEventListener('click', function (e) {
            document.querySelector('#a').innerHTML = `${document.querySelector('#a').innerHTML}<div class="alert alert-dark alert-dismissible fade show" role="alert">
  <strong>Holy guacamole!</strong> You should check in on some of those fields below.
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>`
        })
    </script>
    <footer class="footer">
        <div class="container">
            some custom text
        </div>
    </footer>


    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
    </script>
    <!-- bootstrap js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
        integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous">
    </script>
    <script src="../socket.io/socket.io.js"></script>
    <!-- <script src="./index.js" defer]></script> -->

    <script>
        const form = document.getElementById('form');
        const files = document.getElementById('file');
        const submit = document.getElementById('submit');
        let socket = io();




        socket.emit('msgg', 'hello')



        // Message submit
        form.addEventListener('submit', e => {


            // const toBase64 = file => new Promise((resolve, reject) => {
            //     const reader = new FileReader();
            //     reader.readAsDataURL(file);
            //     reader.onload = () => resolve(reader.result);
            //     reader.onerror = error => reject(error);
            // });
            // file = files.files[0]
            // async function Main() {
            //     const file = files.files[0];
            //     console.log(await toBase64(file));
            //     const data = await toBase64(file);
            //     socket = io();
            //     socket.emit('sendFile', data);
            // }

            e.preventDefault();
            socket.emit('send', files.files[0]);
            // Main();
            // var file = files.files[0]

            // var reader = new FileReader();
            // var fileByteArray = [];
            // reader.readAsArrayBuffer(file);
            // socket.emit('msgg', 'after')
            // let fileData;
            // reader.onload = function (evt) {
            // socket = io();
            // if (evt.target.readyState == FileReader.DONE) {
            //     var arrayBuffer = evt.target.result,
            //         array = new Uint8Array(arrayBuffer);
            //     for (var i = 0; i < array.length; i++) {
            //         fileByteArray.push(array[i]);
            //     }
            // }
            // reader.readAsDataURL(file);
            // console.log(reader.result);
            // fileData = reader.result;
            // alert('ad');

            // file = {
            //     data: fileData,
            //     type: 'video'
            // }
            // console.log(file)
            // // sending file to server
            // socket.emit('sendFile', file);
            // }
            // socket.emit('sendFile', file);

            // console.log(fileByteArray);

            // var b64;
            // var file = files.files[0],
            //     reader = new FileReader();


            // reader.onloadend = function () {
            //     // Since it contains the Data URI, we should remove the prefix and keep only Base64 string
            //     console.log('dsfa');
            //     b64 = reader.result.replace(/^data:.+;base64,/, '');
            //     console.log(b64);
            // };


        });
    </script>

</body>

</html>